<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JavaScript正则表达式</title>
    <script src="helper.js"></script>
</head>
<body>
<ol>
    <li>
        测试用。
        <input id="regex" type="text" placeholder="regex" value="^\/{1}.*\/{1}$"/>
        <br/>
        <input id="text" type="text" placeholder="string"/>
        <script>
            findID('text').addEventListener('blur', function () {
                var regex_text = findID('regex').value;
                var text = this.value;
                var regex=new RegExp(regex_text);//匹配是正则表达式的字符串
                if(regex.test(text)){//关键字是正则表达式
                    alert('ok');
                }else{//关键字不是正则表达式
                    alert('not ok');
                }
            });
        </script>
    </li>
    <li>
        定义正则表达式。regex= /regex/ or regex= new RegExp(regex)
        <script>
            var regex1 = /^[0-9]*[1-9][0-9]*$/;
            var regex2 = new RegExp('^[0-9]*[1-9][0-9]*$');
            write(regex1);
            write(regex2);
        </script>
    </li>
    <li>
        测试字符串。regex.test(str) or text.match(regex)
        <script>
            var regex1 = /^[0-9]*[1-9][0-9]*$/;
            var regex2 = new RegExp('^[0-9]*[1-9][0-9]*$');

            var text1 = '123';
            var text2 = '-123';
            result = regex1.test(text1);
            write(result); //true
            result = regex1.test(text2);
            write(result); //false

            result = regex2.test(text1);
            write(result); //true
            result = regex2.test(text2);
            write(result); //false

            result = text1.match(regex1);
            msg(result);// ["123", index: 0, input: "123", groups: undefined]
            result = text2.match(regex1);
            msg(result);// null

            result = text1.match(regex2);
            msg(result);// ["123", index: 0, input: "123", groups: undefined]
            result = text2.match(regex2);
            msg(result);// null
        </script>
    </li>
    <li>
        定义正则表达式（匹配所有子串）。regex= /regex/g or regex= new RegExp(regex,'g')
        <script>
            //var regex = /ab/g;
            var regex = new RegExp('ab', 'g');
            var text = 'abcde_abcde_abc';
            result = text.match(regex);
            write(result); //["ab", "ab", "ab"]
        </script>
    </li>
    <li>
        根据正则表达式替换字符串内容。str.replace(regex,function(){})
        <script>
            var regex = new RegExp('ab');
            var regex2 = new RegExp('ab', 'g');
            var text = 'abcde_abcde_abc';
            var replaced = text.replace(regex, function (target, index, original) {
                console.log(target, index, original);
                return "<span style='color:red;'>" + target + "</span>";
            });
            write(replaced);
            replaced = text.replace(regex2, function (target, index, original) {
                console.log(target, index, original);
                return "<span style='color:red;'>" + target + "</span>";
            });
            write(replaced);
        </script>
    </li>
    <li>
        根据有首尾匹配的正则表达式，对字符串的每一行内容进行判断。regex= /regex/gm or regex= new RegExp(regex,'gm')
        <script>
            var regex = new RegExp("^a(.|\n)*b$", 'g');//使.包含\n
            //var regex2 = /^a.*b$/gm;
            var regex2 = new RegExp('^a.*b$', 'gm');
            var text = "aaaab\nabbbc\nacccb";
            result = text.match(regex);
            write(result);
            result = text.match(regex2);
            write(result);
        </script>
    </li>
    <li>
        忽略正则表达式中字母的大小写（大小写均匹配）。regex= /regex/i or regex= new RegExp(regex,'i')
        <script>
            var regex = new RegExp("^A.*b$", 'gm');//使.包含\n
            //var regex2 = /a.*b/gmi;
            var regex2 = new RegExp('^A.*b$', 'gmi');
            var text = "aaaab\nabbbc\nacccb";
            result = text.match(regex);
            write(result);
            result = text.match(regex2);
            write(result);
        </script>
    </li>
</ol>
</body>
</html>