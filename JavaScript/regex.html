<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JavaScript Regex</title>
    <script src="helper.js"></script>
</head>
<body>
<ol>
    <li>
        测试。
        <input id="regex" type="text" placeholder="regex" value="^\/{1}.*\/{1}$"/>
        <br/>
        <input id="text" type="text" placeholder="string"/>
        <script>
            findID('text').addEventListener('blur', function () {
                var regex_text = findID('regex').value;
                var text = this.value;
                var regex=new RegExp(regex_text);//匹配是正则表达式的字符串
                if(regex.test(text)){//关键字是正则表达式
                    alert('ok');
                }else{//关键字不是正则表达式
                    alert('not ok');
                }
            });
        </script>
    </li>
    <li>
        测试字符串。<br/>
        <kbd>
            var regex1 = /^[0-9]*[1-9][0-9]*$/; //正整数<br/>
            var regex2 = new RegExp('^[0-9]*[1-9][0-9]*$'); //正整数<br/>

            var text1 = '123';<br/>
            var text2 = '-123';<br/>
            regex1.test(text1); //true<br/>
            regex1.test(text2); //false<br/>
            regex2.test(text1); //true<br/>
            regex2.test(text2); //false<br/>

            text1.match(regex1); //["123", index: 0, input: "123", groups: undefined]<br/>
            text2.match(regex1); // null<br/>

            text1.match(regex2); //["123", index: 0, input: "123", groups: undefined]<br/>
            text2.match(regex2); //null<br/>
        </kbd>
    </li>
    <li>
        定义正则表达式（匹配所有子串）。<br/>
        <kbd>
            //var regex = /ab/g;<br/>
            var regex = new RegExp('ab', 'g');<br/>
            var text = 'abcde_abcde_abc';<br/>
            text.match(regex); //["ab", "ab", "ab"]<br/>
        </kbd>
    </li>
    <li>
        根据正则表达式替换字符串内容。<kbd>.replace(regex, function (target, index, original) {return '...';}</kbd>
        <script>
            var regex = new RegExp('ab');
            var regex2 = new RegExp('ab', 'g');
            var text = 'abcde_abcde_abc';
            var replaced = text.replace(regex, function (target, index, original) {
                console.log(target, index, original);
                return "<span style='color:red;'>" + target + "</span>";
            });
            write(replaced);
            replaced = text.replace(regex2, function (target, index, original) {
                console.log(target, index, original);
                return "<span style='color:red;'>" + target + "</span>";
            });
            write(replaced);
        </script>
    </li>
    <li>
        根据有首尾匹配的正则表达式，对字符串的每一行内容进行判断。<kbd>regex= /regex/gm or regex= new RegExp(regex,'gm')</kbd>
        <script>
            var regex = new RegExp("^a(.|\n)*b$", 'g');//使.包含\n
            //var regex2 = /^a.*b$/gm;
            var regex2 = new RegExp('^a.*b$', 'gm');
            var text = "aaaab\nabbbc\nacccb";
            result = text.match(regex);
            write(result);
            result = text.match(regex2);
            write(result);
        </script>
    </li>
    <li>
        忽略正则表达式中字母的大小写（大小写均匹配）。<kbd>regex= /regex/i or regex= new RegExp(regex,'i')</kbd>
        <script>
            var regex = new RegExp("^A.*b$", 'gm');//使.包含\n
            //var regex2 = /a.*b/gmi;
            var regex2 = new RegExp('^A.*b$', 'gmi');
            var text = "aaaab\nabbbc\nacccb";
            result = text.match(regex);
            write(result);
            result = text.match(regex2);
            write(result);
        </script>
    </li>
</ol>
</body>
</html>