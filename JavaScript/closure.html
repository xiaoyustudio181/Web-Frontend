<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script src="helper.js"></script>
</head>
<body>
<ol>
    <li>
        闭包是函数和声明该函数的词法环境的组合。
        <script>
            function tell_name() {
                var name='peter';
                function tell() {
                    write(name);
                }
                tell();
            }
            tell_name();
        </script>
        <script>
            function tell_name2() {
                var name='peter';
                function tell() {
                    var name='jerry';
                    write(name);
                }
                tell();
            }
            tell_name2();
        </script>
    </li>
    <li>
        方法造方法。
        <script>
            function makeFunc() {
                var name = "tom";
                function displayName() {//被外部函数返回
                    write(name);//Mozilla
                }
                return displayName;
            }

            var myFunc1 = makeFunc();
            myFunc1();
        </script>
        <script>
            function makeAdder(x) {
                return function(y) {
                    write(x + y);
                };
            }
            var add5 = makeAdder(5);//生成新方法
            var add10 = makeAdder(10);//生成新方法

            add5(2);  // 7
            add10(2); // 12
        </script>
    </li>
    <li>
        使用闭包来定义公共函数，并令其可以访问私有函数和变量。这个方式也称为模块模式（module pattern）
        <script>
            var counter = (function() {
                var privateCounter = 0;
                function changeBy(val) {
                    privateCounter += val;
                }
                return {
                    increment: function() {//加1
                        changeBy(1);
                    },
                    decrement: function() {//减1
                        changeBy(-1);
                    },
                    value: function() {//获取值
                        return privateCounter;
                    }
                }
            })();

            write(counter.value());//0
            counter.increment();
            counter.increment();
            write(counter.value());//2
            counter.decrement();
            write(counter.value());//1
        </script>
    </li>
</ol>
</body>
</html>